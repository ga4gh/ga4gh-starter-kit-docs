<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cookbooks/samtools-view-drs-wes/intro-and-setup">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Intro and Setup | GA4GH Starter Kit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/intro-and-setup"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Intro and Setup | GA4GH Starter Kit"><meta data-rh="true" name="description" content="In this cookbook, we will be running a very simple samtools view workflow on a small test dataset using two GA4GH standards: Worfklow Execution Service (WES) and Data Repository Service (DRS). Samtools is a command line application that is ubiquitous in bioinformatics and genomics. It is generally used to summarize, filter, and manipulate alignment data (in SAM, BAM, or CRAM format). Here, Samtools will simply be used to count the number of reads in some test BAM files."><meta data-rh="true" property="og:description" content="In this cookbook, we will be running a very simple samtools view workflow on a small test dataset using two GA4GH standards: Worfklow Execution Service (WES) and Data Repository Service (DRS). Samtools is a command line application that is ubiquitous in bioinformatics and genomics. It is generally used to summarize, filter, and manipulate alignment data (in SAM, BAM, or CRAM format). Here, Samtools will simply be used to count the number of reads in some test BAM files."><link data-rh="true" rel="icon" href="/img/ga4gh.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/intro-and-setup"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/intro-and-setup" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/intro-and-setup" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7d27dd95.css">
<link rel="preload" href="/assets/js/runtime~main.7395f64d.js" as="script">
<link rel="preload" href="/assets/js/main.ec1c046e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ga4gh.svg" alt="GA4GH" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ga4gh.svg" alt="GA4GH" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">GA4GH Starter Kit</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/intro">Start Here</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/starter-kit-apis/overview">APIs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/cookbooks/intro">Cookbooks</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/starter-kit-in-action/overview">In Action</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started/intro">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts-and-guides/configuring-webservice-properties">Concepts &amp; Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/starter-kit-apis/overview">Starter Kit APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/cookbooks/intro">Cookbooks</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/intro">Intro to Cookbooks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup">Run samtools view using WES and DRS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup">Intro and Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls">Run samtools view on WES with HTTP URLs as input</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls">Run samtools view on WES with DRS URLs as input</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/starter-kit-in-action/overview">Starter Kit in Action</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cookbooks</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Run samtools view using WES and DRS</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Intro and Setup</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Intro and Setup</h1><p>In this cookbook, we will be running a very simple <code>samtools view</code> workflow on a small test dataset using two GA4GH standards: Worfklow Execution Service (WES) and Data Repository Service (DRS). <a href="http://www.htslib.org/" target="_blank" rel="noopener noreferrer">Samtools</a> is a command line application that is ubiquitous in bioinformatics and genomics. It is generally used to summarize, filter, and manipulate alignment data (in SAM, BAM, or CRAM format). Here, Samtools will simply be used to count the number of reads in some test BAM files.</p><p>As mentioned above, we will set up two 2 starter kit services based on GA4GH API specifications:</p><ol><li>Workflow Execution Service (WES) - we will trigger <code>samtools view</code> workflow runs by submitting API requests to WES</li><li>Data Repostory Service (DRS) - in the last part of this exercise, we will use DRS IDs and DRS URLs to provide a layer of indirection to the BAM file inputs of the workflow, allowing us to run the same workflow regardless of what cloud or local resources the input files are stored on.</li></ol><p>We will also use the Starter Kit UI to make manual changes to our DRS database using a web browser.</p><p>This cookbook assumes that:</p><ul><li>docker and docker-compose are installed and updated on your local machine</li><li>You have access to your local machine&#x27;s command line terminal</li><li>You have an API testing tool installed on your local machine (such as Postman).</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="starter-kit-service-setup">Starter Kit Service setup<a href="#starter-kit-service-setup" class="hash-link" aria-label="Direct link to Starter Kit Service setup" title="Direct link to Starter Kit Service setup">​</a></h2><p>Let&#x27;s begin by configuring and running our two starter kit services: WES and DRS, as well as the UI service.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-directory">Project directory<a href="#project-directory" class="hash-link" aria-label="Direct link to Project directory" title="Direct link to Project directory">​</a></h3><p>Let&#x27;s setup the project directory space. Using the terminal, create and navigate to an empty directory in a preferred workspace. For example, the project directory used for the sample commands in the docs is: <code>/Users/jadams/cookbooks/samtools_wes_drs</code>.</p><p>Create and navigate to project directory:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p /Users/jadams/cookbooks/samtools_wes_drs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd /Users/jadams/cookbooks/samtools_wes_drs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="database-setup">Database setup<a href="#database-setup" class="hash-link" aria-label="Direct link to Database setup" title="Direct link to Database setup">​</a></h3><p>We will use simple SQLite databases as the database backend driving WES and DRS starter kit apps. The <code>ga4gh-starter-kit-utils</code> app will allow us to easily create these databases with the correct tables to store the underlying GA4GH data models.</p><p>First, let&#x27;s create two empty files that will eventually become our SQLite databases: one for WES and one for DRS.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p db/wes db/drs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">touch db/wes/wes.demo.db db/drs/drs.demo.db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, let&#x27;s pull the <code>ga4gh-starter-kit-utils</code> docker image if we haven&#x27;t already:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker pull ga4gh/ga4gh-starter-kit-utils:0.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>ga4gh-starter-kit-utils</code> will help us create the necessary tables for the WES and DRS Starter Kit apps. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="wes-create-database-tables">WES: Create database tables<a href="#wes-create-database-tables" class="hash-link" aria-label="Direct link to WES: Create database tables" title="Direct link to WES: Create database tables">​</a></h4><p>First, let&#x27;s see what migration sets we can apply for WES:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run ga4gh/ga4gh-starter-kit-utils:0.1.0 database list-migrations wes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">API Migration Signatures: wes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wes@0.2.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wes@0.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above result tells us that we can create tables based on the <code>0.2.0</code> release of Starter Kit WES. Let&#x27;s create these tables on the <code>wes.demo.db</code> SQLite database:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -v `pwd`/db/wes:/db \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ga4gh/ga4gh-starter-kit-utils:0.1.0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    database \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    create-tables \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -d jdbc:sqlite:/db/wes.demo.db \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    wes@0.2.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may confirm the operation was successful by reviewing the contents of <code>wes.demo.db</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="drs-create-database-tables-and-add-test-dataset">DRS: Create database tables and add test dataset<a href="#drs-create-database-tables-and-add-test-dataset" class="hash-link" aria-label="Direct link to DRS: Create database tables and add test dataset" title="Direct link to DRS: Create database tables and add test dataset">​</a></h4><p>First, let&#x27;s see what migration sets we can apply for DRS:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run ga4gh/ga4gh-starter-kit-utils:0.1.0 database list-migrations drs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">API Migration Signatures: drs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">drs@0.1.9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above result tells us that we can create tables based on the <code>0.1.9</code> release of Starter Kit DRS. Let&#x27;s create these tables on the <code>drs.demo.db</code> SQLite database:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -v `pwd`/db/drs:/db \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ga4gh/ga4gh-starter-kit-utils:0.1.0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    database \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    create-tables \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -d jdbc:sqlite:/db/drs.demo.db \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    drs@0.1.9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, let&#x27;s add the DRS test dataset to <code>drs.demo.db</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -v `pwd`/db/drs:/db \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ga4gh/ga4gh-starter-kit-utils:0.1.0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    database \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    add-test-dataset \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -d jdbc:sqlite:/db/drs.demo.db \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    drs@0.1.9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may confirm the operations were successful by reviewing the contents of <code>drs.demo.db</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-configuration">Service configuration<a href="#service-configuration" class="hash-link" aria-label="Direct link to Service configuration" title="Direct link to Service configuration">​</a></h3><p>We plan to set up 3 web services via Docker:</p><ol><li>WES</li><li>DRS</li><li>Starter Kit UI</li></ol><p>For each service, we need to create custom YAML configuration files to ensure they run with the correct properties, such as listening port(s), database connections, and service info responses.</p><p>First, let&#x27;s create three empty files that will eventually become our YAML configurations for each service:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p config/wes config/drs config/ui</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">touch config/wes/wes.config.yml config/drs/drs.config.yml config/ui/ui.config.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="wes-yaml-configuration">WES YAML Configuration<a href="#wes-yaml-configuration" class="hash-link" aria-label="Direct link to WES YAML Configuration" title="Direct link to WES YAML Configuration">​</a></h4><p>Using a preferred text editor, write the following YAML config to <code>config/wes/wes.config.yml</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  serverProps:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    publicApiPort: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    adminApiPort: 4501</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  databaseProps:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   url: jdbc:sqlite:/db/wes.demo.db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  serviceInfo:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    id: org.ga4gh.starterkit.cookbook.samtools.wes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: Starter Kit Demo WES Service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    description: WES service for samtools view Starter Kit Cookbook</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="drs-yaml-configuration">DRS YAML Configuration<a href="#drs-yaml-configuration" class="hash-link" aria-label="Direct link to DRS YAML Configuration" title="Direct link to DRS YAML Configuration">​</a></h4><p>Using a preferred text editor, write the following YAML config to <code>config/drs/drs.config.yml</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">drs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  serverProps:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    hostname: drs-demo.ga4gh.org</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    publicApiPort: 80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    publicApiCorsAllowedOrigins:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &#x27;*&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    publicApiCorsAllowedHeaders:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &#x27;*&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    adminApiPort: 4503</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    adminApiCorsAllowedOrigins:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &#x27;*&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    adminApiCorsAllowedHeaders:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &#x27;*&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  databaseProps:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    url: jdbc:sqlite:/db/drs.demo.db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    poolSize: 8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  serviceInfo:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    id: org.ga4gh.starterkit.cookbook.samtools.drs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name: Starter Kit Demo DRS Service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    description: DRS service for samtools view Starter Kit Cookbook</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ui-yaml-configuration">UI YAML Configuration<a href="#ui-yaml-configuration" class="hash-link" aria-label="Direct link to UI YAML Configuration" title="Direct link to UI YAML Configuration">​</a></h4><p>Using a preferred text editor, write the following YAML config to <code>config/ui/ui.config.yml</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">starterKitUI:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  port: 4504</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  services:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - serviceType: drs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      publicURL: &#x27;http://localhost:4502&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      adminURL: &#x27;http://localhost:4503&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above config points the UI to the DRS service, so that models controlled by DRS (i.e. DRS Objects) can be created and edited via the UI.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-services">Run Services<a href="#run-services" class="hash-link" aria-label="Direct link to Run Services" title="Direct link to Run Services">​</a></h2><p>With our database and YAML configurations set up, we are ready to run each of the necessary web services.</p><p>First, let&#x27;s pull the docker images we want to run if we haven&#x27;t already:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker pull ga4gh/ga4gh-starter-kit-wes:0.2.0-nextflow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker pull ga4gh/ga4gh-starter-kit-drs:0.2.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker pull ga4gh/ga4gh-starter-kit-ui:0.2.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For WES, we also need to create a working directory mount between the host and container. To start, we first create this directory on the host, e.g.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p /tmp/shared/wes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-services-with-docker-compose">Run Services with docker-compose<a href="#run-services-with-docker-compose" class="hash-link" aria-label="Direct link to Run Services with docker-compose" title="Direct link to Run Services with docker-compose">​</a></h3><p>We will use <code>docker-compose</code> to spin up our 3 dockerized GA4GH services using a single YAML file.</p><p>In the project directory, create a file named <code>docker-compose.yml</code>, e.g.:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">touch docker-compose.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In a text editor, write the following YAML config to <code>docker-compose.yml</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">version: &quot;3.9&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  wes-demo.ga4gh.org:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: wes-demo.ga4gh.org</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: ga4gh/ga4gh-starter-kit-wes:0.2.0-nextflow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;80:80&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;4501:4501&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/db/wes:/db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/config/wes:/config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - /var/run/docker.sock:/var/run/docker.sock</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - /tmp/shared/wes:/tmp/shared/wes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    working_dir: /tmp/shared/wes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command: -c /config/wes.config.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  drs-demo.ga4gh.org:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: drs-demo.ga4gh.org</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: ga4gh/ga4gh-starter-kit-drs:0.2.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;4502:80&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;4503:4503&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/db/drs:/db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/config/drs:/config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command: java -jar ga4gh-starter-kit-drs.jar -c /config/drs.config.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ui-demo.ga4gh.org:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: ui-demo.ga4gh.org</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: ga4gh/ga4gh-starter-kit-ui:0.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;4504:4504&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/config/ui:/config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command: -c /config/ui.config.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, we can start our network of 3 services by simply running:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="explanation-of-the-docker-network">Explanation of the docker network<a href="#explanation-of-the-docker-network" class="hash-link" aria-label="Direct link to Explanation of the docker network" title="Direct link to Explanation of the docker network">​</a></h3><p>Running the above steps just created a <strong>docker network</strong> of 3 services. With <code>docker-compose</code>, each service sits within a single virtual network, meaning that one service can easily reach out to another service in the network by referencing the docker container name as if it were a domain name. In the last section of this cookbook, we will see WES making calls to DRS using its <code>container_name</code>, i.e. <code>http://drs-demo.ga4gh.org</code></p><p><strong>Note:</strong> Since our API testing tool sits outside the docker network, the URLs we use to make test API calls will be different from the URLs used by one service in the network to reach another service. For example, to call the DRS service we use:</p><ul><li><code>http://localhost:4502</code> outside the docker network, i.e. from API testing tool</li><li><code>http://drs-demo.ga4gh.org</code> inside the docker network, i.e. from WES</li></ul><p>Next, let&#x27;s quickly go over how each of our services are configured to run according to the contents of <code>docker-compose.yml</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="wes-docker-composeyml-config">WES docker-compose.yml config<a href="#wes-docker-composeyml-config" class="hash-link" aria-label="Direct link to WES docker-compose.yml config" title="Direct link to WES docker-compose.yml config">​</a></h4><p>Recall the WES service snippet from `docker-compose.yml:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  wes-demo.ga4gh.org:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: wes-demo.ga4gh.org</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: ga4gh/ga4gh-starter-kit-wes:0.2.0-nextflow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;80:80&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;4501:4501&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/db/wes:/db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/config/wes:/config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - /var/run/docker.sock:/var/run/docker.sock</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - /tmp/shared/wes:/tmp/shared/wes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    working_dir: /tmp/shared/wes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command: -c /config/wes.config.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration:</p><ul><li>starts a Starter Kit WES container that is pre-bundled with Nextflow, so it is possible to submit Nextflow-based workflow run requests to WES.</li><li>exposes ports, enabling us to make API requests from outside the network</li><li>mounts the SQLite database and YAML config passed to the server application</li><li>mounts docker-specific files/directories, so that docker processes can be started from within the container (Nextflow starts its own docker containers for individual workflow runs).</li><li>runs the Starter Kit WES application with the YAML config as input</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="drs-docker-composeyml-config">DRS docker-compose.yml config<a href="#drs-docker-composeyml-config" class="hash-link" aria-label="Direct link to DRS docker-compose.yml config" title="Direct link to DRS docker-compose.yml config">​</a></h4><p>Recall the DRS service snippet from <code>docker-compose.yml</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  drs-demo.ga4gh.org:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: drs-demo.ga4gh.org</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: ga4gh/ga4gh-starter-kit-drs:0.2.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;4502:80&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;4503:4503&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/db/drs:/db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/config/drs:/config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command: java -jar ga4gh-starter-kit-drs.jar -c /config/drs.config.yml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration:</p><ul><li>starts a Starter Kit DRS container</li><li>exposes ports, enabling us to make API requests from outside the network</li><li>mounts the SQLite database and YAML config passed to the server application</li><li>runs the Starter Kit DRS application with the YAML config as input</li></ul><p><strong>NOTE</strong>: The <code>0.1.9</code> DRS database schema we applied is compatible with the <code>0.2.0</code> release of Starter Kit DRS.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="starter-kit-ui-docker-composeyml-config">Starter Kit UI docker-compose.yml config<a href="#starter-kit-ui-docker-composeyml-config" class="hash-link" aria-label="Direct link to Starter Kit UI docker-compose.yml config" title="Direct link to Starter Kit UI docker-compose.yml config">​</a></h4><p>Recall the UI service snippet from <code>docker-compose.yml</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ui-demo.ga4gh.org:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: ui-demo.ga4gh.org</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: ga4gh/ga4gh-starter-kit-ui:0.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;4504:4504&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - $PWD/config/ui:/config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command: -c /config/ui.config.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above configuration:</p><ul><li>starts a Starter Kit UI container</li><li>exports ports, enabling us to access the UI via web browser</li><li>mounts the YAML config passed to the UI server application</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="validate-services">Validate Services<a href="#validate-services" class="hash-link" aria-label="Direct link to Validate Services" title="Direct link to Validate Services">​</a></h2><p>Now, let&#x27;s validate each service is running correctly</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate-wes">Validate WES<a href="#validate-wes" class="hash-link" aria-label="Direct link to Validate WES" title="Direct link to Validate WES">​</a></h3><p>Let&#x27;s confirm the WES service is running correctly by checking its Service Info. Using a preferred API testing tool, submit the following request:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://localhost/ga4gh/wes/v1/service-info</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should receive the following Service Info as a response:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;org.ga4gh.starterkit.cookbook.samtools.wes&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;name&quot;: &quot;Starter Kit Demo WES Service&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;description&quot;: &quot;WES service for samtools view Starter Kit Cookbook&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contactUrl&quot;: &quot;mailto:info@ga4gh.org&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;documentationUrl&quot;: &quot;https://github.com/ga4gh/ga4gh-starter-kit-wes&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;createdAt&quot;: &quot;2020-01-15T12:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;updatedAt&quot;: &quot;2020-01-15T12:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;environment&quot;: &quot;test&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;group&quot;: &quot;org.ga4gh&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;artifact&quot;: &quot;wes&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;version&quot;: &quot;1.0.1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;organization&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;Global Alliance for Genomics and Health&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;url&quot;: &quot;https://ga4gh.org&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;workflowTypeVersions&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;NEXTFLOW&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;21.04.0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;workflowEngineVersions&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;NATIVE&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that the <code>id</code>, <code>name</code>, and <code>description</code> fields are the same as what was specified in the YAML config.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate-drs">Validate DRS<a href="#validate-drs" class="hash-link" aria-label="Direct link to Validate DRS" title="Direct link to Validate DRS">​</a></h3><p>Let&#x27;s confirm the DRS service is running correctly by checking its Service Info. Using a preferred API testing tool, submit the following request:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://localhost:4502/ga4gh/drs/v1/service-info</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should receive the following Service Info as a response:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;org.ga4gh.starterkit.cookbook.samtools.drs&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;name&quot;: &quot;Starter Kit Demo DRS Service&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;description&quot;: &quot;DRS service for samtools view Starter Kit Cookbook&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contactUrl&quot;: &quot;mailto:info@ga4gh.org&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;documentationUrl&quot;: &quot;https://github.com/ga4gh/ga4gh-starter-kit-drs&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;createdAt&quot;: &quot;2020-01-15T12:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;updatedAt&quot;: &quot;2020-01-15T12:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;environment&quot;: &quot;test&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;version&quot;: &quot;0.1.0&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;group&quot;: &quot;org.ga4gh&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;artifact&quot;: &quot;drs&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;version&quot;: &quot;1.1.0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;organization&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;Global Alliance for Genomics and Health&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;url&quot;: &quot;https://ga4gh.org&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that the <code>id</code>, <code>name</code>, and <code>description</code> fields are the same as what was specified in the YAML config.</p><p>Since we added the test DRS dataset, we can also verify that the <code>/objects</code> endpoint is working correctly by supplying the test ID <code>b8cd0667-2c33-4c9f-967b-161b905932c9</code>. Submit the following request:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://localhost:4502/ga4gh/drs/v1/objects/b8cd0667-2c33-4c9f-967b-161b905932c9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should receive the following DRS Object response:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;b8cd0667-2c33-4c9f-967b-161b905932c9&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;description&quot;: &quot;Open dataset of 384 phenopackets&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;created_time&quot;: &quot;2021-03-12T20:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;name&quot;: &quot;phenopackets.test.dataset&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;size&quot;: 143601,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;updated_time&quot;: &quot;2021-03-13T12:30:45Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;checksums&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;checksum&quot;: &quot;8711d59ca4264b3e3d0ce16349d94d0ab8ce493e&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;sha1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;checksum&quot;: &quot;930014c944b655323ade3f4b239178022bfb5443ef6b280a7d7d69292867d010&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;sha256&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;checksum&quot;: &quot;938b077a59b11ad6e5958f9f34148f18&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;md5&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;self_uri&quot;: &quot;drs://drs-demo.ga4gh.org/b8cd0667-2c33-4c9f-967b-161b905932c9&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contents&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;phenopackets.mundhofir.family&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;drs_uri&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;drs://drs-demo.ga4gh.org/1af5cdcf-898c-4dbc-944e-1ac95e82c0ea&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;id&quot;: &quot;1af5cdcf-898c-4dbc-944e-1ac95e82c0ea&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;phenopackets.zhang.family&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;drs_uri&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;drs://drs-demo.ga4gh.org/355a74bd-6571-4d4a-8602-a9989936717f&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;id&quot;: &quot;355a74bd-6571-4d4a-8602-a9989936717f&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;phenopackets.cao.family&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;drs_uri&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;drs://drs-demo.ga4gh.org/a1dd4ae2-8d26-43b0-a199-342b64c7dff6&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;id&quot;: &quot;a1dd4ae2-8d26-43b0-a199-342b64c7dff6&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;phenopackets.lalani.family&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;drs_uri&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;drs://drs-demo.ga4gh.org/c69a3d6c-4a28-4b7c-b215-0782f8d62429&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;id&quot;: &quot;c69a3d6c-4a28-4b7c-b215-0782f8d62429&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate-starter-kit-ui">Validate Starter Kit UI<a href="#validate-starter-kit-ui" class="hash-link" aria-label="Direct link to Validate Starter Kit UI" title="Direct link to Validate Starter Kit UI">​</a></h3><p>Let&#x27;s confirm the UI service is running correctly by visiting <code>http://localhost:4504/</code> via web browser (such as Google Chrome). You should see the following landing page:</p><p><img loading="lazy" alt="UI Landing" src="/assets/images/ui-landing-0ce8c7bf99e145ae4df00bcfb246bb57.png" width="1899" height="857" class="img_ev3q"></p><p>If we navigate to the <code>/services</code> view (by clicking &quot;Enter&quot; -&gt; &quot;Get Started&quot;), we should also see a single <strong>valid service</strong>, representing the Starter Kit DRS instance we spun up and pointed the UI to:</p><p><img loading="lazy" alt="UI Services" src="/assets/images/ui-services-3fecbe2e98d5dc49a77c2bc48e1ebd60.png" width="704" height="618" class="img_ev3q"></p><p>Lastly, if we click the &quot;View&quot; button for the DRS service, we will be directed to the <code>/services/org.ga4gh.starterkit.cookbook.samtools.drs</code> view. This displays the DRS instance&#x27;s Service Info, and also leads to forms where we can create and edit DRS Objects for that instance.</p><p><img loading="lazy" alt="UI Service" src="/assets/images/ui-service-726a2608e6f759c47e6f12a0fbcd442a.png" width="1122" height="850" class="img_ev3q"></p><p>In the <a href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls">next phase</a>, we will run a Nextflow-based <code>samtools view</code> workflow using API calls to the WES service we set up.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/cookbooks/samtools-view-drs-wes/intro-and-setup.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cookbooks/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Intro to Cookbooks</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Run samtools view on WES with HTTP URLs as input</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#starter-kit-service-setup" class="table-of-contents__link toc-highlight">Starter Kit Service setup</a><ul><li><a href="#project-directory" class="table-of-contents__link toc-highlight">Project directory</a></li><li><a href="#database-setup" class="table-of-contents__link toc-highlight">Database setup</a></li><li><a href="#service-configuration" class="table-of-contents__link toc-highlight">Service configuration</a></li></ul></li><li><a href="#run-services" class="table-of-contents__link toc-highlight">Run Services</a><ul><li><a href="#run-services-with-docker-compose" class="table-of-contents__link toc-highlight">Run Services with docker-compose</a></li><li><a href="#explanation-of-the-docker-network" class="table-of-contents__link toc-highlight">Explanation of the docker network</a></li></ul></li><li><a href="#validate-services" class="table-of-contents__link toc-highlight">Validate Services</a><ul><li><a href="#validate-wes" class="table-of-contents__link toc-highlight">Validate WES</a></li><li><a href="#validate-drs" class="table-of-contents__link toc-highlight">Validate DRS</a></li><li><a href="#validate-starter-kit-ui" class="table-of-contents__link toc-highlight">Validate Starter Kit UI</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/intro">Start Here</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/overview">APIs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cookbooks/intro">Cookbooks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-in-action/overview">In Action</a></li></ul></div><div class="col footer__col"><div class="footer__title">API Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/drs/drs_overview">DRS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/wes/wes_overview">WES</a></li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ga4gh/ga4gh-starter-kit-drs" target="_blank" rel="noopener noreferrer" class="footer__link-item">DRS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/ga4gh/ga4gh-starter-kit-wes" target="_blank" rel="noopener noreferrer" class="footer__link-item">WES<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Global Alliance for Genomics and Health.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7395f64d.js"></script>
<script src="/assets/js/main.ec1c046e.js"></script>
</body>
</html>