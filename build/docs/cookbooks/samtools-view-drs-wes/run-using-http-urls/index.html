<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cookbooks/samtools-view-drs-wes/run-using-http-urls">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Run samtools view on WES with HTTP URLs as input | GA4GH Starter Kit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Run samtools view on WES with HTTP URLs as input | GA4GH Starter Kit"><meta data-rh="true" name="description" content="In the previous step, we configured and started instances of WES, DRS, and the Starter Kit UI."><meta data-rh="true" property="og:description" content="In the previous step, we configured and started instances of WES, DRS, and the Starter Kit UI."><link data-rh="true" rel="icon" href="/img/ga4gh.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7d27dd95.css">
<link rel="preload" href="/assets/js/runtime~main.7395f64d.js" as="script">
<link rel="preload" href="/assets/js/main.ec1c046e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ga4gh.svg" alt="GA4GH" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ga4gh.svg" alt="GA4GH" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">GA4GH Starter Kit</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/intro">Start Here</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/starter-kit-apis/overview">APIs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/cookbooks/intro">Cookbooks</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/starter-kit-in-action/overview">In Action</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started/intro">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts-and-guides/configuring-webservice-properties">Concepts &amp; Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/starter-kit-apis/overview">Starter Kit APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/cookbooks/intro">Cookbooks</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/intro">Intro to Cookbooks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup">Run samtools view using WES and DRS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup">Intro and Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls">Run samtools view on WES with HTTP URLs as input</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls">Run samtools view on WES with DRS URLs as input</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/starter-kit-in-action/overview">Starter Kit in Action</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cookbooks</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Run samtools view using WES and DRS</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Run samtools view on WES with HTTP URLs as input</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Run samtools view on WES with HTTP URLs as input</h1><p>In the <a href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup">previous step</a>, we configured and started instances of WES, DRS, and the Starter Kit UI.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-and-dataset">Workflow and Dataset<a href="#workflow-and-dataset" class="hash-link" aria-label="Direct link to Workflow and Dataset" title="Direct link to Workflow and Dataset">​</a></h2><p>We will now attempt to run a Nextflow-based <code>samtools view</code> workflow to count the number of reads in BAM files. We will use some small BAMs from the Tabula Muris open dataset as our test dataset.</p><p><strong>Note</strong>: For reference, you may wish to read more about <a href="https://tabula-muris.ds.czbiohub.org/" target="_blank" rel="noopener noreferrer">Tabula Muris</a>, view the <a href="https://github.com/czbiohub/tabula-muris" target="_blank" rel="noopener noreferrer">Github Repo</a>, and see more info about the <a href="https://github.com/czbiohub/tabula-muris/blob/master/tabula-muris-on-aws.md" target="_blank" rel="noopener noreferrer">files uploaded to the Tabula Muris s3 bucket</a>.</p><p>The Nextflow workflow is version controlled on Github at <a href="https://github.com/jb-adams/samtools-view-count-nf" target="_blank" rel="noopener noreferrer">https://github.com/jb-adams/samtools-view-count-nf</a>. We can tell WES to run this workflow simply by providing this Github repository URL.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="submit-workflow-run-request-to-wes">Submit workflow run request to WES<a href="#submit-workflow-run-request-to-wes" class="hash-link" aria-label="Direct link to Submit workflow run request to WES" title="Direct link to Submit workflow run request to WES">​</a></h2><p>The <code>samtools-view-count-nf</code> takes one input parameter, <code>--input</code>, which must reference a local (file path) or remote (URL) SAM/BAM/CRAM file. As our Tabula Muris test dataset BAMs are all stored on a public AWS S3 bucket, we can submit these as URLs to the workflow.</p><p>For now, let&#x27;s work with the following BAM URL:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s submit a workflow run request to WES, running our <code>samtools view</code> workflow on the above input BAM. To do so, issue the following HTTP request using your preferred API testing tool:</p><p><strong>Method and URL</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">POST http://localhost/ga4gh/wes/v1/runs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Headers</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: multipart/form-data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Form data (body)</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">workflow_type: NEXTFLOW</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">workflow_type_version: 21.04.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">workflow_url: https://github.com/jb-adams/samtools-view-count-nf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">workflow_params: {&quot;input&quot;: &quot;https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Upon doing so, we should receive a single <code>run_id</code>, indicating that the workflow run request was accepted. The <code>run_id</code> provided to us will allow us to monitor the status of the workflow run. In this example, a <code>run_id</code> of <code>8d2f044a-a613-41c0-b67b-0477a1b1b1f8</code> was returned, however each time a run request is submitted to WES, and randomly generated <code>run_id</code> will be returned.</p><p>Example workflow run request and <code>run_id</code> response:</p><p><img loading="lazy" alt="WES Workflow Run Submission" src="/assets/images/wes-workflow-run-submission-d6fe8c3a25a8d334ee4abb23e640e2c6.png" width="1102" height="647" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitor-workflow-run">Monitor workflow run<a href="#monitor-workflow-run" class="hash-link" aria-label="Direct link to Monitor workflow run" title="Direct link to Monitor workflow run">​</a></h2><p>If we give the workflow run a minute to complete, we can monitor its status by passing the <code>run_id</code> to the <code>GET /runs/{run_id}</code> endpoint:</p><p>Example request (substitute in your own <code>run_id</code>):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://localhost/ga4gh/wes/v1/runs/8d2f044a-a613-41c0-b67b-0477a1b1b1f8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;run_id&quot;: &quot;8d2f044a-a613-41c0-b67b-0477a1b1b1f8&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;request&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;input&quot;: &quot;https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_type&quot;: &quot;NEXTFLOW&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_type_version&quot;: &quot;21.04.0&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_url&quot;: &quot;https://github.com/jb-adams/samtools-view-count-nf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;state&quot;: &quot;COMPLETE&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;run_log&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;jb-adams/samtools-view-count-nf&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;cmd&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;#!/bin/bash -ue&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;echo \&quot;Running samtools view on https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam\&quot; &gt;&amp;2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;samtools view -c https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;start_time&quot;: &quot;2021-09-03T13:40:06Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;end_time&quot;: &quot;2021-09-03T13:40:20Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;stdout&quot;: &quot;http://localhost/ga4gh/wes/v1/logs/nextflow/stdout/8d2f044a-a613-41c0-b67b-0477a1b1b1f8?workdirs=0f%2F4340a1a21885f9bfb182bf34a85d2f&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;stderr&quot;: &quot;http://localhost/ga4gh/wes/v1/logs/nextflow/stderr/8d2f044a-a613-41c0-b67b-0477a1b1b1f8?workdirs=0f%2F4340a1a21885f9bfb182bf34a85d2f&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;exit_code&quot;: 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;task_logs&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;samtools_view&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;cmd&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;#!/bin/bash -ue&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;echo \&quot;Running samtools view on https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam\&quot; &gt;&amp;2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;samtools view -c https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;start_time&quot;: &quot;2021-09-03T13:40:06Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;end_time&quot;: &quot;2021-09-03T13:40:20Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;stdout&quot;: &quot;http://localhost/ga4gh/wes/v1/logs/nextflow/stdout/8d2f044a-a613-41c0-b67b-0477a1b1b1f8/0f/4340a1a21885f9bfb182bf34a85d2f&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;stderr&quot;: &quot;http://localhost/ga4gh/wes/v1/logs/nextflow/stderr/8d2f044a-a613-41c0-b67b-0477a1b1b1f8/0f/4340a1a21885f9bfb182bf34a85d2f&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;exit_code&quot;: 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;outputs&quot;: {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above response payload tells us information about our workflow run:</p><ul><li><code>state: COMPLETE</code> indicates the workflow run completed successfully</li><li>the <code>request</code> attribute indicates the initial request parameters we supplied to trigger the workflow run</li><li><code>run_log</code> gives us a summary of the entire run, including start and end times, stdout and stderr output</li><li><code>outputs</code> provides URLs/paths to any output files/directories created during the workflow. In this case, no output files were created, all output is available in <code>stdout</code></li></ul><p>If we follow the URL at <code>run_log.stdout</code>, we will find the main result of the workflow run, that is, the read count of the input BAM file.</p><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://localhost/ga4gh/wes/v1/logs/nextflow/stdout/8d2f044a-a613-41c0-b67b-0477a1b1b1f8?workdirs=0f%2F4340a1a21885f9bfb182bf34a85d2f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Returns a response of:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">848036</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Therefore, the BAM file at <code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam</code> contains <code>848036</code> reads.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-workflow-with-different-inputs">Run workflow with different inputs<a href="#run-workflow-with-different-inputs" class="hash-link" aria-label="Direct link to Run workflow with different inputs" title="Direct link to Run workflow with different inputs">​</a></h2><p>Try running the same workflow with different input BAMs. Use WES API calls to submit the workflow run request and monitor its output (the read count). Below are some input URLs and expected read counts you can use to validate the run was configured correctly and completed successfully.</p><table><thead><tr><th>Input URL</th><th>Read Count</th></tr></thead><tbody><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam</code></td><td>848036</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R2.mus.Aligned.out.sorted.bam</code></td><td>806872</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000127-3_38_F-1-1_R1.mus.Aligned.out.sorted.bam</code></td><td>821666</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000127-3_38_F-1-1_R2.mus.Aligned.out.sorted.bam</code></td><td>821604</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/B7-MAA000586-3_8_M-1-1_R1.mus.Aligned.out.sorted.bam</code></td><td>3950888</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/C8-B002433-3_38_F-1-1_R1.mus.Aligned.out.sorted.bam</code></td><td>1539546</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/D5-MAA000452-3_8_M-1-1_R1.mus.Aligned.out.sorted.bam</code></td><td>3912618</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/E20-MAA000652-3_10_M-1-1_R1.mus.Aligned.out.sorted.bam</code></td><td>758692</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/F17-B002765-3_38_F-1-1_R1.mus.Aligned.out.sorted.bam</code></td><td>998700</td></tr><tr><td><code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/F19-D041912-3_8_M-1-1_R1.mus.Aligned.out.sorted.bam</code></td><td>1521586</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>In this section, we ran the <code>samtools view</code> workflow to count reads in BAM files by executing simple HTTP requests to the WES service. You may have noticed that we did not need DRS or the UI for this section. In the <a href="/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls">next section</a>, we will explore how to run the same workflow with DRS URLs instead of direct HTTP URLs as input, and how this abstraction provides us with much more flexibility in terms of where input resources can be stored.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Intro and Setup</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Run samtools view on WES with DRS URLs as input</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#workflow-and-dataset" class="table-of-contents__link toc-highlight">Workflow and Dataset</a></li><li><a href="#submit-workflow-run-request-to-wes" class="table-of-contents__link toc-highlight">Submit workflow run request to WES</a></li><li><a href="#monitor-workflow-run" class="table-of-contents__link toc-highlight">Monitor workflow run</a></li><li><a href="#run-workflow-with-different-inputs" class="table-of-contents__link toc-highlight">Run workflow with different inputs</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/intro">Start Here</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/overview">APIs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cookbooks/intro">Cookbooks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-in-action/overview">In Action</a></li></ul></div><div class="col footer__col"><div class="footer__title">API Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/drs/drs_overview">DRS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/wes/wes_overview">WES</a></li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ga4gh/ga4gh-starter-kit-drs" target="_blank" rel="noopener noreferrer" class="footer__link-item">DRS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/ga4gh/ga4gh-starter-kit-wes" target="_blank" rel="noopener noreferrer" class="footer__link-item">WES<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Global Alliance for Genomics and Health.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7395f64d.js"></script>
<script src="/assets/js/main.ec1c046e.js"></script>
</body>
</html>