<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cookbooks/samtools-view-drs-wes/run-using-drs-urls">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Run samtools view on WES with DRS URLs as input | GA4GH Starter Kit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Run samtools view on WES with DRS URLs as input | GA4GH Starter Kit"><meta data-rh="true" name="description" content="In the previous section, we used direct https:// URLs as input BAM files to the samtools view workflow. This is sufficient for multiple use cases, however, we may want to provide an indirect means of referencing workflow inputs, allowing the WES service to resolve the best paths to those inputs based on a number of criteria."><meta data-rh="true" property="og:description" content="In the previous section, we used direct https:// URLs as input BAM files to the samtools view workflow. This is sufficient for multiple use cases, however, we may want to provide an indirect means of referencing workflow inputs, allowing the WES service to resolve the best paths to those inputs based on a number of criteria."><link data-rh="true" rel="icon" href="/img/ga4gh.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7d27dd95.css">
<link rel="preload" href="/assets/js/runtime~main.7395f64d.js" as="script">
<link rel="preload" href="/assets/js/main.ec1c046e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ga4gh.svg" alt="GA4GH" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ga4gh.svg" alt="GA4GH" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">GA4GH Starter Kit</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/intro">Start Here</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/starter-kit-apis/overview">APIs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/cookbooks/intro">Cookbooks</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/starter-kit-in-action/overview">In Action</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started/intro">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts-and-guides/configuring-webservice-properties">Concepts &amp; Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/starter-kit-apis/overview">Starter Kit APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/cookbooks/intro">Cookbooks</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/intro">Intro to Cookbooks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup">Run samtools view using WES and DRS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/intro-and-setup">Intro and Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls">Run samtools view on WES with HTTP URLs as input</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls">Run samtools view on WES with DRS URLs as input</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/starter-kit-in-action/overview">Starter Kit in Action</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cookbooks</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Run samtools view using WES and DRS</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Run samtools view on WES with DRS URLs as input</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Run samtools view on WES with DRS URLs as input</h1><p>In the <a href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls">previous section</a>, we used <strong>direct</strong> <code>https://</code> URLs as input BAM files to the <code>samtools view</code> workflow. This is sufficient for multiple use cases, however, we may want to provide an <strong>indirect</strong> means of referencing workflow inputs, allowing the WES service to <strong>resolve</strong> the best paths to those inputs based on a number of criteria.</p><p>The Data Repository Service (DRS) provides an indirection layer to data. Each <code>DRS Object</code> served by DRS contains some metadata about a set of bytes (e.g. an input file). <code>DRS Object</code>s also provide one or more access methods to the raw file bytes. This allows multiple, identical copies of data to be stored on different cloud storage resources (e.g. AWS S3, Google Storage), and in different geographical regions. A resolving service (in this case, WES) can choose where to retrieve the raw data from based on its own capabilities. Different resolving (WES) services have the opportunity to choose the best &quot;mirror&quot; to access the data from. This could be based on regional proximity or supported cloud infrastructure. </p><p>Let&#x27;s run an API call to our DRS Service, requesting the <code>DRS Object</code> with an id of <code>0f8abce3-e161-4bdf-981f-86257d505d69</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://localhost:4502/ga4gh/drs/v1/objects/0f8abce3-e161-4bdf-981f-86257d505d69</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The response from this API call is a <code>DRS Object</code> in JSON format, which contains standardized attributes like <code>id</code>, <code>name</code>, <code>description</code>, etc. In particular is the <code>access_methods</code> attribute, e.g.:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;access_methods&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;access_id&quot;: &quot;b16b6733-5bf7-47c4-b029-a59b564cac23&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;https&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;access_url&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;url&quot;: &quot;s3://ga4gh-demo-data/phenopackets/Cao-2018-TGFBR2-Patient_4.json&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;s3&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;region&quot;: &quot;us-east-2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The returned <code>DRS Object</code> has 2 access methods:</p><ol><li>An <code>access_id</code> that we can pass back to the server to get a properly formatted URL to the data.</li><li>An <code>s3://</code> formatted URL to the data.</li></ol><p>If we focus on (2), we see that the raw data for this <code>DRS Object</code> is stored in an AWS S3 bucket. Any WES service that understands <code>s3://</code> URLs could resolve this to a direct HTTP(s) URL as a staging step prior to running the workflow.</p><p>The Starter Kit WES service is capable of resolving <code>s3://</code> URLs. If we set up the tabula muris BAM files as <code>DRS Objects</code>, we can submit <code>DRS IDs</code> to WES as part of the workflow run request, and allow WES to resolve these to direct URLs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-drs-objects-via-the-ui">Create DRS Objects via the UI<a href="#create-drs-objects-via-the-ui" class="hash-link" aria-label="Direct link to Create DRS Objects via the UI" title="Direct link to Create DRS Objects via the UI">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="navigate-to-the-form">Navigate to the form<a href="#navigate-to-the-form" class="hash-link" aria-label="Direct link to Navigate to the form" title="Direct link to Navigate to the form">​</a></h3><p>Let&#x27;s create <code>DRS Objects</code> for some of the tabula muris BAM files. On a web browser, navigate to <code>http://localhost:4504</code> (where our UI is deployed), then click the following UI buttons to get to the &quot;Create New DRS Object&quot; form:</p><p>Enter -&gt; Services -&gt; View -&gt; DRS Objects -&gt; New DRS Object</p><p>You may also find the following video helpful to navigate to the form:</p><video width="100%" controls=""><source src="/video/cookbooks/samtools-view-drs-wes/SamtoolsViewDrsWes-NavigateToCreateForm.mp4" type="video/mp4"></video><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-object">Create the object<a href="#create-the-object" class="hash-link" aria-label="Direct link to Create the object" title="Direct link to Create the object">​</a></h3><p>On the form, we will create one DRS Object representing a single Tabula Muris BAM file stored on the public AWS S3 bucket (at <code>https://s3.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam</code>). Let&#x27;s enter the following information into the web UI fields:</p><table><thead><tr><th>Field Name</th><th>Field Value</th></tr></thead><tbody><tr><td>id</td><td>tabulamuris.A1-B000126-3_39_F-1-1_R1</td></tr><tr><td>name</td><td>Tabula Muris FACS A1-B000126-3_39_F-1-1_R1 BAM file</td></tr><tr><td>description</td><td>FACS BAM file from Tabula Muris dataset id A1-B000126-3_39_F-1-1_R1</td></tr><tr><td>created time</td><td>(no update; leave as default)</td></tr><tr><td>updated time</td><td>(no update; leave as default)</td></tr><tr><td>version</td><td>1.0.0</td></tr><tr><td>bundle or blob?</td><td>blob</td></tr><tr><td>size</td><td>29298050</td></tr><tr><td>checksums <!-- -->[0]</td><td>type: md5, checksum: eadcf4e4a9f0b3508c186a3d59002d61</td></tr><tr><td>checksums <!-- -->[1]</td><td>type: sha1, checksum: a453b1d4efefa76a3f4f948cefc6853d1b5aa9b4</td></tr><tr><td>checksums <!-- -->[2]</td><td>type: sha256, checksum: 66eac14b2563e594030491caedc99160725a7d0d614f9db5ee888dd351e02430</td></tr><tr><td>aws s3 access points <!-- -->[0]</td><td>region: us-east-1, bucket: czbiohub-tabula-muris, key: /facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam</td></tr></tbody></table><p>Once all information has been entered, click &quot;Submit&quot; to create the object.</p><p>The following video shows the creation of the DRS Object, followed by validation that the object was created:</p><video width="100%" controls=""><source src="/video/cookbooks/samtools-view-drs-wes/SamtoolsViewDrsWes-CreateDrsObject.mp4" type="video/mp4"></video><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validate-and-inspect-object">Validate and inspect object<a href="#validate-and-inspect-object" class="hash-link" aria-label="Direct link to Validate and inspect object" title="Direct link to Validate and inspect object">​</a></h3><p>Once we&#x27;ve submitted the new DRS Object, we can confirm that it is accessible from the DRS service via HTTP request:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://localhost:4502/ga4gh/drs/v1/objects/tabulamuris.A1-B000126-3_39_F-1-1_R1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>should return the following response (<code>created_time</code> and <code>updated_time</code> will be different): </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;tabulamuris.A1-B000126-3_39_F-1-1_R1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;description&quot;: &quot;FACS BAM file from Tabula Muris dataset id A1-B000126-3_39_F-1-1_R1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;created_time&quot;: &quot;2021-09-03T14:46:00Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;name&quot;: &quot;Tabula Muris FACS A1-B000126-3_39_F-1-1_R1 BAM file&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;size&quot;: 29298050,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;updated_time&quot;: &quot;2021-09-03T14:46:00Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;checksums&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;checksum&quot;: &quot;a453b1d4efefa76a3f4f948cefc6853d1b5aa9b4&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;sha1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;checksum&quot;: &quot;66eac14b2563e594030491caedc99160725a7d0d614f9db5ee888dd351e02430&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;sha256&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;checksum&quot;: &quot;eadcf4e4a9f0b3508c186a3d59002d61&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;md5&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;self_uri&quot;: &quot;drs://drs-demo.ga4gh.org/tabulamuris.A1-B000126-3_39_F-1-1_R1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;access_methods&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;access_url&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;url&quot;: &quot;s3://czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;s3&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;region&quot;: &quot;us-east-1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s inspect both the <code>self_uri</code> and <code>access_methods</code> attributes further, as they are most important for running the workflow on WES using DRS IDs as input:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="self_uri"><code>self_uri</code><a href="#self_uri" class="hash-link" aria-label="Direct link to self_uri" title="Direct link to self_uri">​</a></h4><p>The value of <code>self_uri</code> is <code>drs://drs-demo.ga4gh.org/tabulamuris.A1-B000126-3_39_F-1-1_R1</code>. The <code>drs://</code> scheme indicates that this is a standardized DRS URI, in which both the server (<code>drs-demo.ga4gh.org</code>) and the object id (<code>tabulamuris.A1-B000126-3_39_F-1-1_R1</code>) are indicated. Any service that understands DRS URIs will be able to resolve this to an HTTP URL to obtain the corresponding DRS Object. The Starter Kit WES service can resolve DRS URIs.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="access_methods"><code>access_methods</code><a href="#access_methods" class="hash-link" aria-label="Direct link to access_methods" title="Direct link to access_methods">​</a></h4><p><code>access_methods</code> contains a single method pointing to the AWS S3 bucket and key to the BAM file. Again, the Starter Kit WES service can resolve <code>s3://</code> based URLs to <code>http(s)</code> URLs to make them suitable as input to the workflow. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="wes-workflow-run-request">WES workflow run request<a href="#wes-workflow-run-request" class="hash-link" aria-label="Direct link to WES workflow run request" title="Direct link to WES workflow run request">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="submit-workflow-run">Submit workflow run<a href="#submit-workflow-run" class="hash-link" aria-label="Direct link to Submit workflow run" title="Direct link to Submit workflow run">​</a></h3><p>We are ready to rerun our workflow. Now, instead of submitting the input HTTPS URL directly, we will submit the DRS URL as an input parameter to WES, and allow WES to resolve it.</p><p>Issue the following HTTP request:</p><p><strong>Method and URL</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">POST http://localhost/ga4gh/wes/v1/runs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Headers</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: multipart/form-data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Form data (body)</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">workflow_type: NEXTFLOW</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">workflow_type_version: 21.04.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">workflow_url: https://github.com/jb-adams/samtools-view-count-nf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">workflow_params: {&quot;input&quot;: &quot;drs://drs-demo.ga4gh.org/tabulamuris.A1-B000126-3_39_F-1-1_R1&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that compared to the <code>POST</code> request from the previous section, only the <code>workflow_params</code> have changed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitor-workflow-run">Monitor workflow run<a href="#monitor-workflow-run" class="hash-link" aria-label="Direct link to Monitor workflow run" title="Direct link to Monitor workflow run">​</a></h3><p>If we give the workflow run a minute to complete, we can again monitor its status by passing the <code>run_id</code> (in this case, <code>940f0c51-2dab-4e02-ab3a-92dfaf68d65f</code>) to the <code>GET /runs/{run_id}</code> endpoint:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET http://localhost/ga4gh/wes/v1/runs/940f0c51-2dab-4e02-ab3a-92dfaf68d65f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;run_id&quot;: &quot;940f0c51-2dab-4e02-ab3a-92dfaf68d65f&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;request&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;input&quot;: &quot;drs://drs-demo.ga4gh.org/tabulamuris.A1-B000126-3_39_F-1-1_R1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_type&quot;: &quot;NEXTFLOW&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_type_version&quot;: &quot;21.04.0&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_url&quot;: &quot;https://github.com/jb-adams/samtools-view-count-nf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;state&quot;: &quot;COMPLETE&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;run_log&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;jb-adams/samtools-view-count-nf&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;cmd&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;#!/bin/bash -ue&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;echo \&quot;Running samtools view on https://s3.us-east-1.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam\&quot; &gt;&amp;2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;samtools view -c https://s3.us-east-1.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;start_time&quot;: &quot;2021-09-02T19:15:33Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;end_time&quot;: &quot;2021-09-02T19:15:43Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;stdout&quot;: &quot;http://localhost/ga4gh/wes/v1/logs/nextflow/stdout/940f0c51-2dab-4e02-ab3a-92dfaf68d65f?workdirs=0a%2F0838ad17d4486bace1dc908e9e44ca&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;stderr&quot;: &quot;http://localhost/ga4gh/wes/v1/logs/nextflow/stderr/940f0c51-2dab-4e02-ab3a-92dfaf68d65f?workdirs=0a%2F0838ad17d4486bace1dc908e9e44ca&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;exit_code&quot;: 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;task_logs&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;name&quot;: &quot;samtools_view&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;cmd&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;#!/bin/bash -ue&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;echo \&quot;Running samtools view on https://s3.us-east-1.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam\&quot; &gt;&amp;2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;samtools view -c https://s3.us-east-1.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;start_time&quot;: &quot;2021-09-02T19:15:33Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;end_time&quot;: &quot;2021-09-02T19:15:43Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;stdout&quot;: &quot;http://localhost/ga4gh/wes/v1/logs/nextflow/stdout/940f0c51-2dab-4e02-ab3a-92dfaf68d65f/0a/0838ad17d4486bace1dc908e9e44ca&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;stderr&quot;: &quot;http://localhost/ga4gh/wes/v1/logs/nextflow/stderr/940f0c51-2dab-4e02-ab3a-92dfaf68d65f/0a/0838ad17d4486bace1dc908e9e44ca&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;exit_code&quot;: 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;outputs&quot;: {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Just as before, the response payload tells us that the workflow run completed successfully. If we follow the URL at <code>run_log.stdout</code>, we again see the expected read count of <code>848036</code> printed to stdout.</p><p>But there&#x27;s a key difference between this run and the run launched in the previous section. Let&#x27;s look at original request parameters we submitted to WES, indicated by <code>request.workflow_params</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;request&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;workflow_params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;input&quot;: &quot;drs://drs-demo.ga4gh.org/tabulamuris.A1-B000126-3_39_F-1-1_R1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here, we see the DRS URL (representing our DRS Object) we submitted. However, when we look at the raw workflow commands under <code>run_log.cmd</code>, we see:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">samtools view -c https://s3.us-east-1.amazonaws.com/czbiohub-tabula-muris/facs_bam_files/A1-B000126-3_39_F-1-1_R1.mus.Aligned.out.sorted.bam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>How did WES know to run the workflow using that BAM file URL? Simply put, the WES service performed 2 URL resolutions prior to running the workflow on the <code>drs://</code> URL. First, to lookup the contents of the DRS Object, and second, to resolve the S3 access method it found into the final HTTPS URL.</p><p>While we only explored the resolution of <code>s3://</code> URLs, the DRS specification supports many URL schemes (e.g. <code>file://</code>, <code>https://</code>, <code>gs://</code>), giving data providers flexibility over the access methods they can support, and giving WES implementations choice over which access method(s) to make use of.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>In this cookbook, we explored how to use WES and DRS to launch a simple workflow using only HTTP requests. First, by submitting direct URLs as input parameters, and second, by submitting DRS URLs and allowing WES to resolve the DRS Object to a raw URL for fetching bytes.</p><p>If you wish to explore the concepts covered in this cookbook further, you could:</p><ol><li>Create more DRS Objects based on the <a href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls#run-workflow-with-different-inputs">table of Tabula Muris S3 BAM objects</a>. Register one DRS Object per BAM file via the UI, and attempt to run the workflow using the resulting DRS URL as input. Validate the workflow run outputs the correct number of reads.</li><li>Attempt to run your own Nextflow workflow via WES. Currently, Nextflow workflows tracked on Github can be submitted to Starter Kit WES with one of the following URL structures:<ul><li><code>https://github.com/{user/org}/{repository}</code> - runs the workflow at the default branch (e.g. <code>main</code>)</li><li><code>https://github.com/{user/org}/{repository}/tree/{branch}</code> runs the workflow at the specified branch</li></ul></li></ol><p>Return to <a href="/docs/cookbooks/intro">cookbook intro</a> to explore more cookbooks.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/cookbooks/samtools-view-drs-wes/run-using-drs-urls.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cookbooks/samtools-view-drs-wes/run-using-http-urls"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Run samtools view on WES with HTTP URLs as input</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/starter-kit-in-action/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">In Action - Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-drs-objects-via-the-ui" class="table-of-contents__link toc-highlight">Create DRS Objects via the UI</a><ul><li><a href="#navigate-to-the-form" class="table-of-contents__link toc-highlight">Navigate to the form</a></li><li><a href="#create-the-object" class="table-of-contents__link toc-highlight">Create the object</a></li><li><a href="#validate-and-inspect-object" class="table-of-contents__link toc-highlight">Validate and inspect object</a></li></ul></li><li><a href="#wes-workflow-run-request" class="table-of-contents__link toc-highlight">WES workflow run request</a><ul><li><a href="#submit-workflow-run" class="table-of-contents__link toc-highlight">Submit workflow run</a></li><li><a href="#monitor-workflow-run" class="table-of-contents__link toc-highlight">Monitor workflow run</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/intro">Start Here</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/overview">APIs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cookbooks/intro">Cookbooks</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-in-action/overview">In Action</a></li></ul></div><div class="col footer__col"><div class="footer__title">API Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/drs/drs_overview">DRS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/starter-kit-apis/wes/wes_overview">WES</a></li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ga4gh/ga4gh-starter-kit-drs" target="_blank" rel="noopener noreferrer" class="footer__link-item">DRS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/ga4gh/ga4gh-starter-kit-wes" target="_blank" rel="noopener noreferrer" class="footer__link-item">WES<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Global Alliance for Genomics and Health.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7395f64d.js"></script>
<script src="/assets/js/main.ec1c046e.js"></script>
</body>
</html>