"use strict";(self.webpackChunkga4gh_starter_kit_docs=self.webpackChunkga4gh_starter_kit_docs||[]).push([[664],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),g=r,m=c["".concat(s,".").concat(g)]||c[g]||u[g]||i;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},2749:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return o},default:function(){return u},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return p}});var a=n(3117),r=(n(7294),n(3905));const i={sidebar_position:2},o="Configuring Database Connection",l={unversionedId:"concepts-and-guides/configuring-database-connection",id:"concepts-and-guides/configuring-database-connection",title:"Configuring Database Connection",description:"All Starter Kit web services (i.e. core applications based on GA4GH API specifications) are configurable with a YAML config file. Part of the YAML config file includes a databaseProps object, which modifies the behavior of database connection properties.",source:"@site/docs/concepts-and-guides/configuring-database-connection.md",sourceDirName:"concepts-and-guides",slug:"/concepts-and-guides/configuring-database-connection",permalink:"/docs/concepts-and-guides/configuring-database-connection",draft:!1,editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/concepts-and-guides/configuring-database-connection.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Configuring Webservice Properties",permalink:"/docs/concepts-and-guides/configuring-webservice-properties"},next:{title:"Configuring Service Info",permalink:"/docs/concepts-and-guides/configuring-service-info"}},s={},p=[{value:"Configurable <code>databaseProps</code> properties",id:"configurable-databaseprops-properties",level:3},{value:"Constructing a Valid JDBC URL",id:"constructing-a-valid-jdbc-url",level:3},{value:"SQLite",id:"sqlite",level:4},{value:"PostgreSQL",id:"postgresql",level:4},{value:"Example <code>databaseProps</code>",id:"example-databaseprops",level:3}],d={toc:p},c="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"configuring-database-connection"},"Configuring Database Connection"),(0,r.kt)("p",null,"All Starter Kit web services (i.e. ",(0,r.kt)("a",{parentName:"p",href:"../starter-kit-apis/overview"},"core applications")," based on GA4GH API specifications) are configurable with a YAML config file. Part of the YAML config file includes a ",(0,r.kt)("inlineCode",{parentName:"p"},"databaseProps")," object, which modifies the behavior of database connection properties."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"databaseProps")," can be modified to connect to any database that has been set up with the appropriate table schema for the starter kit service being run. For more information on setting up a database with the correct table schema, see ",(0,r.kt)("a",{parentName:"p",href:"./using-starter-kit-utils"},"Using Starter Kit Utils"),"."),(0,r.kt)("p",null,"The Starter Kit supports connections to either ",(0,r.kt)("strong",{parentName:"p"},"SQLite")," or ",(0,r.kt)("strong",{parentName:"p"},"PostgreSQL")," based databases."),(0,r.kt)("h3",{id:"configurable-databaseprops-properties"},"Configurable ",(0,r.kt)("inlineCode",{parentName:"h3"},"databaseProps")," properties"),(0,r.kt)("p",null,"A full explanation of configurable database connectivity properties is outlined below."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Data Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"url")),(0,r.kt)("td",{parentName:"tr",align:null},"A valid ",(0,r.kt)("inlineCode",{parentName:"td"},"JDBC")," database connection URL, indicating the database type (",(0,r.kt)("strong",{parentName:"td"},"SQLite")," or ",(0,r.kt)("strong",{parentName:"td"},"PostgreSQL"),") and location. The default URL connects to the test SQLite database bundled within the docker container. For more information, see ",(0,r.kt)("a",{parentName:"td",href:"#constructing-a-valid-jdbc-url"},"Constructing a valid JDBC URL")),(0,r.kt)("td",{parentName:"tr",align:null},"string (JDBC URL)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"jdbc:sqlite:./ga4gh-starter-kit.dev.db"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"username")),(0,r.kt)("td",{parentName:"tr",align:null},"Database user with sufficient privileges to access required tables"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"password")),(0,r.kt)("td",{parentName:"tr",align:null},"Password for the above ",(0,r.kt)("inlineCode",{parentName:"td"},"username")),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"poolSize")),(0,r.kt)("td",{parentName:"tr",align:null},"Total connections to the database"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"showSQL")),(0,r.kt)("td",{parentName:"tr",align:null},"Outputs SQL to console for each database operation"),(0,r.kt)("td",{parentName:"tr",align:null},"boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"true")))),(0,r.kt)("h3",{id:"constructing-a-valid-jdbc-url"},"Constructing a Valid JDBC URL"),(0,r.kt)("h4",{id:"sqlite"},"SQLite"),(0,r.kt)("p",null,"SQLite JDBC URLs are formatted as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"jdbc:sqlite:${SQLITE_DATABASE_FILE_PATH}\n")),(0,r.kt)("p",null,"where ",(0,r.kt)("inlineCode",{parentName:"p"},"${SQLITE_DATABASE_FILE_PATH}")," is the (absolute or relative) path to the local file acting as the database. For example, if the database file is at ",(0,r.kt)("inlineCode",{parentName:"p"},"/data/database/starter-kit.db"),", the JDBC URL would be:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"jdbc:sqlite:/data/database/starter-kit.db\n")),(0,r.kt)("h4",{id:"postgresql"},"PostgreSQL"),(0,r.kt)("p",null,"PostgreSQL JDBC URLs can take one of the following forms:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"jdbc:postgresql:${DATABASE}")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"jdbc:postgresql://${HOST}/${DATABASE}")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"jdbc:postgresql://${HOST}:${PORT}/${DATABASE}"))),(0,r.kt)("p",null,"where:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"${DATABASE}")," is the database name,"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"${HOST}")," is the host/domain name where the database is running. Does not need to be specified if database is running at the default ",(0,r.kt)("inlineCode",{parentName:"li"},"localhost")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"${PORT}")," is the networking port the database host is listening on. Does not need to be specified if it is listening on the default port ",(0,r.kt)("inlineCode",{parentName:"li"},"5432"),".")),(0,r.kt)("p",null,'For example, if the target database was named "StarterKitDB", was running at "drs-db-starterkit.example.com" on port ',(0,r.kt)("inlineCode",{parentName:"p"},"5555"),", the JDBC URL would be:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"jdbc:postgresql://drs-db-starterkit.example.com:5555/StarterKitDB\n")),(0,r.kt)("h3",{id:"example-databaseprops"},"Example ",(0,r.kt)("inlineCode",{parentName:"h3"},"databaseProps")),(0,r.kt)("p",null,"The following snippet displays an example ",(0,r.kt)("inlineCode",{parentName:"p"},"databaseProps")," YAML configuration to configure the behavior of a starter kit service. A ",(0,r.kt)("inlineCode",{parentName:"p"},"drs")," service is used in the example, but the ",(0,r.kt)("inlineCode",{parentName:"p"},"serverProps")," object is equally applicable to any starter kit service."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"drs:\n  databaseProps:\n    url: jdbc:postgresql://starter-kit-demo-db.ga4gh.org:5555/drsdb\n    username: ga4gh-admin\n    password: makeSureThisIsSecure123\n    poolSize: 8\n    showSQL: false\n")))}u.isMDXComponent=!0}}]);